(this["webpackJsonpvideo-calling-web-app"]=this["webpackJsonpvideo-calling-web-app"]||[]).push([[0],{10:function(e,n,t){},12:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t.n(o),l=t(4),i=t.n(l),a=(t(9),t(10),t(3)),s=t.n(a),r=t(0),u={client:null,joined:!1,published:!1,localStream:null,remoteStreams:[],params:{}},d="c78e9a77eb5b4f829d8c80fd52749254",m="video-calling",b=null,f="006c78e9a77eb5b4f829d8c80fd52749254IAA1uqosvvubbe1gaojpOuFYTwQeOgRgAdbIsmw5VP8F+jO6nq0AAAAAEADK+JrRzbsDYQEAAQDMuwNh";function g(e){u.client=s.a.createClient({mode:"live",codec:"h264"}),u.client.init(d,(function(){console.log("init success"),u.client.join(f||null,m,b?+b:null,(function(n){console.log("join channel: "+m+" success, uid: "+n),u.params.uid=n,"host"===e&&(document.getElementById("remote_video_").disabled=!0,u.client.setClientRole("host"),u.localStream=s.a.createStream({streamID:u.params.uid,audio:!0,video:!0}),u.localStream.init((function(){console.log("init local stream success"),u.localStream.play("local_stream"),u.client.publish(u.localStream,(function(e){console.log("publish failed"),console.error(e)}))}),(function(e){console.error("init local stream failed ",e)})),u.client.on("connection-state-change",(function(e){console.log("audience",e)})),u.client.on("source-state-change",(function(e){console.log("muted")}))),"audience"===e&&(document.getElementById("local_stream").disabled=!0,u.client.on("connection-state-change",(function(e){console.log("audience",e)})),u.client.on("stream-added",(function(e){var n=e.stream,t=n.getId();t!==u.params.uid&&u.client.subscribe(n,(function(e){console.log("stream subscribe failed",e)})),console.log("stream-added remote-uid: ",t)})),u.client.on("stream-removed",(function(e){var n=e.stream.getId();console.log("stream-removed remote-uid: ",n)})),u.client.on("stream-subscribed",(function(e){var n=e.stream,t=n.getId();n.play("remote_video_"),console.log("stream-subscribed remote-uid: ",t)})),u.client.on("stream-unsubscribed",(function(e){var n=e.stream,t=n.getId();n.pause("remote_video_"),console.log("stream-unsubscribed remote-uid: ",t)})))}),(function(e){console.error("client join failed",e)}))}),(function(e){console.error(e)}))}var h=function(e){return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("button",{className:"btn my-2",onClick:function(){return g("host")},children:"Join Channel as Host"}),Object(r.jsx)("button",{className:"btn",onClick:function(){return g("audience")},children:"Join Channel as Audience"}),Object(r.jsx)("button",{className:"btn",onClick:function(){return u.client.unpublish(u.localStream,(function(e){console.log("publish failed"),alert("You left the meeting as Host"),console.error(e)})),void u.client.leave((function(e){console.log(e)}))},children:"Leave Event Host"}),Object(r.jsx)("button",{className:"btn",onClick:function(){u.client.leave((function(){console.log("client leaves channel"),alert("Left the meeting as an audience")}),(function(e){console.log("client leave failed ",e)}))},children:"Leave Event Audience"}),Object(r.jsx)("div",{id:"local_stream",className:"local_stream",style:{width:"100%",height:"100vh",display:"flex"}}),Object(r.jsx)("div",{id:"remote_video_",style:{margin:"0px",width:"100%",height:"100vh",display:"flex"}})]})};var v=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(h,{})})},j=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,13)).then((function(n){var t=n.getCLS,o=n.getFID,c=n.getFCP,l=n.getLCP,i=n.getTTFB;t(e),o(e),c(e),l(e),i(e)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root")),j()},9:function(e,n,t){}},[[12,1,2]]]);
//# sourceMappingURL=main.2a85b1b3.chunk.js.map